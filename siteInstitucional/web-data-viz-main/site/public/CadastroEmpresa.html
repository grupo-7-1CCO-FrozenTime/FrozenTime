<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frozen Time</title>
    <link rel="stylesheet" href="./css/login.css">
    <link rel="stylesheet" href="./css/style.css">
    <!-- <link rel="stylesheet" href="cadastro.css"> -->


</head>

<body>

    <header style="background-color: #76c3cf;">
        <nav class="cabecalho">
            <a href="index.html"><img src="img/logo.png" id="logo" /></a>

            <div class="menu">
                <ul>
                    <li><a href="index.html#beneficios">Solução</a></li>
                    <li><img src="img/linha.png" /></li>

                    <li><a href="calculadora.html">Simulação</a></li>
                    <li><img src="img/linha.png" /></li>

                    <li><a href="assinatura.html">Assine</a></li>
                    <li><img src="img/linha.png" /></li>

                    <li><a href="index.html#sobreNos">Sobre</a></li>
                    <li><img src="img/linha.png" /></li>

                    <li><a href="contato.html">Contato</a></li>
                    <li><img src="img/linha.png" /></li>

                    <li>
                        <a href="login.html"><img src="img/login.png" /></a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>



    <section class="login"> <!-- css login -->

        <div class="container"> <!-- css login -->

            <div class="cardLogin"> <!-- css login -->
                <img src="img/logoFrozenTime.png" alt="Logo da empresa" class="imagemLogo"> <!-- css login -->
            </div>

            <div class="form"> <!-- css login -->
                <div> <!-- css login -->

                    <div class="camposCadastro" id="camposEmpresa"> <!-- css login -->
                        <div class="inputsCadastro"> <!-- css login -->
                            <input type="text" class="input" placeholder="Nome da Empresa" name="Nome da Empresa"
                                id='ipt_nomeEmpresa' autofocus required />
                            <label for="Nome da Empresa" class="input_label">Nome da Empresa</label>
                        </div>

                        <div class="inputsCadastro"> <!-- css login -->
                            <input type="text" class="input" placeholder="CNPJ" name="CNPJ" id='ipt_cnpj' required />
                            <label for="CNPJ" class="input_label">CNPJ</label>
                        </div>

                        <div class="inputsCadastro"> <!-- css login -->
                            <input type="text" class="input" placeholder="Cidade" name="Cidade" id='ipt_cidadeEmpresa'
                                required />
                            <label for="Cidade" class="input_label">Cidade</label>
                        </div>

                        <div class="inputsCadastro"> <!-- css login -->
                            <input type="text" class="input" placeholder="Rua" name="Rua" id='ipt_ruaEmpresa'
                                required />
                            <label for="Rua" class="input_label">Rua</label>
                        </div>

                        <div class="inputsCadastro"> <!-- css login -->
                            <input type="text" class="input" placeholder="bairro" name="bairro" id='ipt_bairroEmpresa'
                                required />
                            <label for="bairro" class="input_label">Bairro</label>
                        </div>

                        <div class="inputsCadastro"> <!-- css login -->
                            <input type="text" class="input" placeholder="Número" name="numero" id='ipt_numeroEmpresa'
                                required />
                            <label for="numero" class="input_label">Número</label>
                        </div>
                        <div class="inputsCadastro"> <!-- css login -->
                            <input type="text" class="input" placeholder="Complemento" name="Complemento"
                                id='ipt_complementoEmpresa' />
                            <label for="Complemento" class="input_label">Complemento</label>
                        </div>
                        <div class="botoesTexto">

                            <div class="" style="display: flex; justify-content: space-evenly; width: 100%;">
                                <div>
                                    <button onclick="cadastrarEmpresa()" style="width: 120px;height: 3;"
                                        class="botaoLogin">Próximo</button>
                                </div>
                                <div>
                                    <a class="cadastrar" href="Login.html">Já sou membro</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="camposCadastro" id="camposFuncionario" style="display: none;  padding-left: 20px">
                    <!-- css login -->
                    <div class="inputsCadastro"> <!-- css login -->
                        <input type="email" class="input" placeholder="Email" name="Email" id='ipt_email' required />
                        <label for="Email" class="input_label">Email</label>
                    </div>

                    <div class="inputsCadastro"> <!-- css login -->
                        <input type="tel" class="input" placeholder="Telefone" name="Telefone" id='ipt_tel' required />
                        <label for="Telefone" class="input_label">Telefone</label>
                    </div>

                    <div class="inputsCadastro"> <!-- css login -->
                        <input type="tel" class="input" placeholder="WhatsApp" name="WhatsApp" id='ipt_whats'
                            required />
                        <label for="WhatsApp" class="input_label">WhatsApp</label>
                    </div>

                    <div class="inputsCadastro"> <!-- css login -->
                        <input type="password" class="input" placeholder="Senha" name="Senha" id='ipt_senha' required />
                        <label for="Senha" class="input_label">Senha</label>
                    </div>

                    <div class="inputsCadastro"> <!-- css login -->
                        <input type="password" class="input" placeholder="Confirmar senha" name="Confirmar"
                            id='ipt_confir' required />
                        <label for="Confirmar" class="input_label">Confirmar senha</label>
                    </div>
                    <div class="botoesTexto">

                        <div class="" style="display: flex; justify-content: space-evenly; width: 100%;">
                            <div>
                                <button onclick="proximo()" style="width: 120px;height: 3;"
                                    class="botaoLogin">Próximo</button>
                            </div>
                            <div>
                                <a class="cadastrar" href="Login.html">Já sou membro</a>
                            </div>
                        </div>
                    </div>


                </div>
                <!-- Campos Cadastro Funcionario -->

            </div>


        </div>


        </div>

    </section>


    <footer class="footer">
        <div class="footerConteudo">

            <div>
                <ul class="logoFooter">
                    <li class="imgLogoFooter">
                        <a href="index.html"><img src="./icon/iconPreto.png"></a>
                    </li>
                    <li class="txtLogoFooter">&copy;2023 FrozenTime, Inc.<br> Todos o direitos reservados</li>
                </ul>

            </div>
            <div>
                <hr>
            </div>
            <div>
                <ul class="paginasFooter">
                    <li>
                        <h2>Navegue</h2>
                    </li>
                    <li><a href="index.html#beneficios">Solução</a></li>
                    <li><a href="calculadora.html">Simulação</a></li>
                    <li><a href="index.html#sobreNos">Sobre</a></li>
                </ul>
            </div>
            <div>
                <hr>
            </div>
            <div>
                <ul class="paginasFooter">
                    <li>
                        <h2>Contatos</h2>
                    </li>
                    <li><a href="https://api.whatsapp.com/send?phone=5511953698849">Whatsapp</a></li>
                    <li onclick="copiarTelefone()">Telefone</li>
                    <li onclick="copiarEmail()">E-mail</li>
                </ul>
            </div>
            <div>
                <hr>
            </div>
            <div>
                <ul class="paginasFooterInsti">
                    <li>
                        <h2>Institucional</h2>
                    </li>
                    <li><a href="contato.html">Contato</a></li>
                </ul>
            </div>
        </div>
    </footer>

</body>

</html>
<script>
    function proximo() {
        var validacoes = ipt_nome.value == "" || ipt_cnpj.value == "" || ipt_endereco.value == "" || ipt_endereco.value == "" || ipt_cidade.value == "" || ipt_numero.value == "" || ipt_complemento.value == "";

        if (validacoes) {
            alert("Por favor, preencher todos os campos")
        } else {
            camposEmpresa.style.display = "none";
            camposFuncionario.style.display = "block";
        }

    }

    function cadastrar() {
        var validacoes = ipt_repre.value == "" || ipt_email.value == "" || ipt_tel.value == "" || ipt_whats.value == "" || ipt_senha.value == "" || ipt_confir.value == "";

        var telefone = ipt_tel.value
        var length = telefone.length != "" && (telefone.length > 9 || telefone.length < 9);

        var whats = ipt_whats.value
        var app = whats.length != "" && (whats.length > 9 || whats.length < 9);

        if (validacoes) {
            alert("Por favor, preencher todos os campos")
        }

        if (length) {
            alert("Favor, por um telefone válido")
        }

        if (app) {
            alert("Favor, por um WhatsApp válido")
        }

        if (ipt_senha.value != ipt_confir.value) {
            alert("As senhas devem ser iguais")
        }

    }

    function copiarTelefone() {
        navigator.clipboard.writeText("11 95369-8849")
            .then(() => {
                alert("Telefone para contato copiado!");
            })
            .catch(() => {
                alert("something went wrong");
            });
    }
    function copiarEmail() {
        navigator.clipboard.writeText("desk@frozentime.atlassian.net")
            .then(() => {
                alert("Email para contato copiado!");
            })
            .catch(() => {
                alert("something went wrong");
            });
    }


    function cadastrarEmpresa() {

        var nomeEmpresa = ipt_nomeEmpresa.value;
        var cnpjEmpresa = ipt_cnpj.value;
        var cidadeEmpresa = ipt_cidadeEmpresa.value;
        var ruaEmpresa = ipt_ruaEmpresa.value;
        var bairroEmpresa = ipt_bairroEmpresa.value;
        var numeroEmpresa = Number(ipt_numeroEmpresa.value);
        var complementoEmpresa = ipt_complementoEmpresa.value;

        if (nomeEmpresa == "" || cnpjEmpresa == "" || cidadeEmpresa == "" || ruaEmpresa == ""|| bairroEmpresa == "" || numeroEmpresa == 0 || complementoEmpresa == "") {
            alert('Campos de cadastro não podem ser nulos!')
            return false;
        }

        // Enviando o valor da nova input
        fetch("/empresa/cadastrarEmpresa", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                nomeEmpresa: nomeEmpresa,
                cnpjEmpresa : cnpjEmpresa,
                cidade: cidadeEmpresa,
                rua: ruaEmpresa,
                bairro: bairroEmpresa,
                numero: numeroEmpresa,
                complemento: complementoEmpresa
            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {

                    window.location = "login.html";
            } else {
                throw alert("Houve um erro ao tentar realizar o cadastro da Empresa!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
        });

        return false;
    }

</script>